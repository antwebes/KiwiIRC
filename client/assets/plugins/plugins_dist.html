<script>
<script>
<script>
/*! kiwiirc-plugins 2015-01-21 */
function getQueryVariable(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}return!1}function quitParamCodeOfUrl(){var a=window.location.href,b=a.split("&").pop(),c=a.replace(b,"");return c=c.slice(0,-1),c=c.replace(/&/g,"%26")}function autoCompleteFormKiwi(){if($("#server_select_nick").val(window.username),getQueryVariable("channel")){var a=getQueryVariable("channel").split(",");a=a.map(function(a){return"#"+a}),$("#server_select_channel").val(a.join(",")),$("form button").click()}}function createQuote(a,b){var c={body:a,board:b};$.ajax({type:"POST",dataType:"json",data:c,url:kiwi.settings.get("api_endpoint")+"api/quotes.json?access_token="+window.token,success:function(a){kiwi.panels().active.addMsg("","[QUOTE] added succesfully: "+a.body,"action mode",null)},error:function(a){var b="";response=void 0!==a.responseJSON?a.responseJSON:JSON.parse(a.responseText),$.each(response.errors,function(a,c){b+=a+" : "+c.message+"\n"}),kiwi.panels().active.addMsg("","[QUOTE] Error not saved quote: "+b,"status")}})}function getQuotes(a,b){$.ajax({type:"GET",dataType:"json",url:kiwi.settings.get("api_endpoint")+"quotes.json?access_token="+window.token+"&filter=board=channel_"+a+",createdat=today",success:function(a){return b(a)},error:function(a,b,c){alert("error en get quotes"),console.log(a),console.log(b),console.log(c)}})}kiwi.plugins.on("loaded",function(){$(".server_details .start button").click()}),kiwi.plugins.on("loaded",function(){var a=kiwi.components.Network(),b=kiwi.components.ControlInput();if(getQueryVariable("nick")){var c=getQueryVariable("nick");$("#server_select_nick").val(c)}if(getQueryVariable("channel")){var d=getQueryVariable("channel").split(",");d=d.map(function(a){return a}),$(".server_select").hide(),$("#server_select_channel").val(d.join(","))}if(getQueryVariable("private")){var e=getQueryVariable("private");$(".server_select").hide(),a.on("connect",function(){b.run("/query "+e),kiwi.connections.active_connection.panels.getByName("#chatsfree")?kiwi.connections.active_connection.panels.getByName("#chatsfree").view.show():kiwi.connections.active_connection.panels.find(function(a){return a.isChannel()}).view.show()})}}),kiwi.plugins.on("loaded",function(){var a=kiwi.components.Network(),b=kiwi.components.ControlInput();if(a.on("message:notice",function(b){("nickserv"==b.nick.toLowerCase()||"nick"==b.nick.toLowerCase())&&((b.msg.indexOf("nickname is registered and protected.")>-1||b.msg.indexOf("nick está registrado y protegido.")>-1)&&a.msg(b.nick,"identifyoauth "+window.token),console.log(b))}),a.on("message:message",function(b){("nickserv"==b.nick.toLowerCase()||"nick"==b.nick.toLowerCase())&&(b.msg.indexOf("nickname is registered and protected.")>-1||b.msg.indexOf("nick está registrado y protegido.")>-1)&&a.msg(b.nick,"identifyoauth "+window.token)}),getQueryVariable("nick")){var c=getQueryVariable("nick");$("#server_select_nick").val(c)}if(getQueryVariable("channel")){var d=getQueryVariable("channel").split(",");d=d.map(function(a){return a}),$(".server_select").hide(),$("#server_select_channel").val(d.join(","))}if(getQueryVariable("private")){var e=getQueryVariable("private");$(".server_select").hide(),a.on("connect",function(){b.run("/query "+e),kiwi.connections.active_connection.panels.getByName("#chatsfree")?kiwi.connections.active_connection.panels.getByName("#chatsfree").view.show():kiwi.connections.active_connection.panels.find(function(a){return a.isChannel()}).view.show()})}(getQueryVariable("channel")||getQueryVariable("private"))&&$("[data-js=submit]").click()}),function(){function a(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}var b={};_.extend(b,Backbone.Events);var c=Backbone.Model.extend({urlRoot:function(){return kiwi.settings.get("guest_api")+"/api/changeAvatar"},selectAvatar:function(){this.set({nick:kiwi.components.Network().get("nick")}),this.save(),b.trigger("avatar:select",this.attributes)}}),d=Backbone.Collection.extend({model:c}),e=Backbone.View.extend({tagName:"li",events:{click:"addAvatar"},template:_.template($("#tmpl_avatar_item").html()),render:function(){return this.$el.html(this.template(this.model.toJSON())),this},addAvatar:function(){this.model.selectAvatar()}}),f=Backbone.View.extend({tagName:"ul",className:"list-inline",render:function(){return this.collection.each(function(a){var b=new e({model:a});this.$el.append(b.render().el)},this),this}}),g=Backbone.View.extend({avatarsCollection:{},events:{"click .avatar_category":"changeAvatarCategory"},changeAvatarCategory:function(a){this.loadAvatar($(a.currentTarget).data("filters"))},loadAvatar:function(a){a=a||"",a+=""===a?"discriminator=avatar,category=animals":",discriminator=avatar",$("#avatar_container",this.$el).empty(),$.ajax({url:kiwi.settings.get("guest_api")+"/photos?filters="+a,dataType:"json",contentType:"application/json"}).done(function(a){var b=a.resources.map(function(a){return delete a.participant,a});avatarsCollection=new d(b);var c=new f({collection:avatarsCollection});$("#avatar_container",this.$el).append(c.render().el),$("#img_avatar",this.$el).attr("src",$("#current_avatar").attr("src"))})},selectAvatar:function(b){$("#img_avatar",this.$el).attr("src",b.path_medium),$("#current_avatar").attr("src",b.path_medium),a()&&localStorage.setItem("chatsfree.avatar",b.path_medium)},render:function(){b.on("avatar:select",this.selectAvatar);var a={avatar_current:"Current Avatar",avatar_category:"Categories"};this.$el=$(_.template($("#tmpl_avatar_config").html().trim(),a)),this.loadAvatar()},initialize:function(){this.render()}}),h=Backbone.Model.extend({initialize:function(){this.set("title","Avatar"),this.view=new g}});kiwi.components.Applet.register("kiwi_avatar",h),kiwi.events.on("command",function(a,b){if("avatar"===b.command){var c=kiwi.components.Applet.loadOnce("kiwi_avatar");c.view.show()}})}();var View=Backbone.View.extend({events:{'click [data-away="save"]':"saveAway",'click input[value="custom"]':"selectCustom"},template:_.template(['<style> #kiwi [data-role="applet-away"] .col-md-offset-3 {margin-left: 25%} #kiwi [data-role="applet-away"] { margin-top: 5px;} </style>','<span data-role="applet-away">','<div class="control-group col-md-6 col-md-offset-3">',"<h6><%= title %></h6>",'<div class="radio"> <label> <input type="radio" name="away_list_type" value="available"> <img src="http://webchat.chateagratis.net/flashv1/data/estados/disponible.png" /> <%= available %> </label> </div>','<div class="radio" data-radio="custom"> <label> <input type="radio" name="away_list_type" value="custom"> <img src="http://webchat.chateagratis.net/flashv1/data/estados/ausente.png" /> <%= custom %> </label> </div>','<div class="radio"> <label> <input type="radio" name="away_list_type" value="out"> <img src="http://webchat.chateagratis.net/flashv1/data/estados/nodisponible.png" /> <%= out %> </label> </div>','<div class="radio"> <label> <input type="radio" name="away_list_type" value="eat"> <img src="http://webchat.chateagratis.net/flashv1/data/estados/saliacomer.png" /> <%= eat %> </label> </div>','<button type="submit" class="btn btn-primary" data-away="save">Save</button>',"</div>"].join("")),initialize:function(){var a={title:"Selecciona tu estado",available:"disponible",custom:"personalizado",out:"estoy ausente",eat:"salí a comer",no_privates:"no acepto privados"};this.$el=$(this.template(a))},saveAway:function(a){a.preventDefault();var b=$("input[name=away_list_type]:checked").val();if(b){switch(b){case"eat":message="No estoy aquí ahora, salí a comer";break;case"out":message="No estoy aquí ahora, vuelvo enseguida";break;case"custom":message=$('[data-away="custom"]').val();break;case"available":message="";break;default:message="No estoy aquí ahora"}var c=kiwi.components.Network();c.raw("AWAY :"+message)}var d=kiwi.components.Applet.loadOnce("kiwi_away");d.close()},selectCustom:function(){0===$('[data-away="custom"]').length&&$('[data-radio="custom"]').append('<input type="text" data-away="custom">')}}),Applet=Backbone.Model.extend({initialize:function(){this.set("title","Away"),this.view=new View}});kiwi.components.Applet.register("kiwi_away",Applet),kiwi.events.on("command",function(a,b){if("showaway"===b.command){var c=kiwi.components.Applet.loadOnce("kiwi_away");c.view.show()}}),function(){kiwi.blockUrlsAndEmails=function(){var a=$(".controlbox .inp"),b="";a.keydown(function(c){var d=/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/gi,e=/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/gi;if(13==c.keyCode){b=$.trim(a.val());var f=1==d.test(b)||e.test(b),g="/"!=b[0]||"/msg "==b.substring(0,5).toLowerCase();if(g&&f)return alert(kiwi.i18n.translate("email_or_url_forbidden").fetch()),a.val(b),!1}else b=a.val()})}}(),function(){var a=(kiwi.components.Network(),kiwi.components.ControlInput()),b=$("#kiwi .controlbox textarea"),c=$('<strong style="cursor:pointer; cursor: hand">B</strong>'),d=!1;$.fn.toggleClick=function(){console.log("toggle click");var a=arguments,b=0;return this.click(function(){a[b].apply(this,arguments),b=(b+1)%a.length})},c.toggleClick(function(){console.log("bold"),b.css("font-weight","bold"),c.parent().addClass("active"),d=!0},function(){console.log("unbold"),b.css("font-weight",""),c.parent().removeClass("active"),d=!1}),b.keydown(function(a){var c=a.keyCode||a.which;13==c&&d&&b.val(""+b.val())}),a.addPluginIcon(c)}(),function(){function a(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}function b(){var a=JSON.parse(localStorage.getItem("channel_history_enabled"));return null==a&&(localStorage.setItem("channel_history_enabled",!0),a=!0),a}function c(){var a=[],c=b();a.push({name:"Enable History",type:"Toggle",options:{defaultValue:c},icon:"trash",command:"/togglehistory"});var d=JSON.parse(localStorage.getItem("channel_history"))||[];d.reverse();var e=d.length;if(e>0){a.push({name:"Clear History",icon:"trash",command:"/clearhistory"});for(var f=0;e>f;f++)a.push({name:d[f],icon:"comments",command:"/join "+d[f]})}for(var g=window.right_menu_items.length,f=0;g>f;f++)"History"==window.right_menu_items[f].name&&(window.right_menu_items[f].submenu=a)}if(a()){var d=kiwi.components.Network();kiwi.events.on("command",function(a,c){if("clearhistory"===c.command&&localStorage.removeItem("channel_history"),"togglehistory"===c.command){var d=b();"undefined"!=typeof ga&&ga("send","event","right_menu","enable_history",!d),localStorage.setItem("channel_history_enabled",!d)}}),d.on("channel:join",function(a){var c=JSON.parse(localStorage.getItem("channel_history_enabled")),d=JSON.parse(localStorage.getItem("channel_history"))||[];if(c){var e=a.channel.toLowerCase(),c=b();-1==d.indexOf(e)&&d.push(e),localStorage.setItem("channel_history",JSON.stringify(d))}})}$(".right-menu").promise().done(function(){c()})}(),function(a){kiwi.plugins.on("loaded",function(){kiwi.components.Network(),kiwi.components.ControlInput();a("body").bind("DOMSubtreeModified",function(b){"messages"==b.target.className&&a(b.target).find(".nick").each(function(){var b=a(this);0==b.find(".avatar").length&&(src=window.getAvatarFromNick(b.html()),b.prepend(src?'<img width="20" height="20" class="usericon avatar" src="'+src.src+'"> ':'<i class="meicon fa fa-user avatar"></i> '))})})})}(jQuery);var styleHtml="<style>#kiwi .emoticon-list {position: absolute;display: block;z-index: 1000;background: #121314;padding: 5px;width: 460px;}#kiwi .emoticon-list .emoticon {display: inline-block;width: 15px;height: 15px;cursor: pointer;margin-right: 5px;}</style>";!function(){var a='<div class="emoticon-list">\n<div data-text=":)" class="emoticon smile"></div>\n<div data-text=":(" class="emoticon sad"></div>\n<div data-text=":3" class="emoticon lion"></div>\n<div data-text=";3" class="emoticon winky_lion"></div>\n<div data-text=":s" class="emoticon confused"></div>\n<div data-text=";(" class="emoticon cry"></div>\n<div data-text=";)" class="emoticon wink"></div>\n<div data-text=";D" class="emoticon wink_happy"></div>\n<div data-text=":p" class="emoticon tongue"></div>\n<div data-text="xP" class="emoticon cringe_tongue"></div>\n<div data-text=":o" class="emoticon shocked"></div>\n<div data-text=":D" class="emoticon happy"></div>\n<div data-text="^.^" class="emoticon eyebrows"></div>\n<div data-text="<3" class="emoticon heart"></div>\n<div data-text=">_<" class="emoticon doh"></div>\n<div data-text="xD" class="emoticon big_grin"></div>\n<div data-text="o.0" class="emoticon wide_eye_right"></div>\n<div data-text="0.o" class="emoticon wide_eye_left"></div>\n<div data-text=":/" class="emoticon unsure"></div>\n</div>\n';$(styleHtml).appendTo($("head"));var b=$(a),c=$('<a><div class="emoticon smile"></div></a>');c.on("click",function(a){a.stopPropagation();$(this);b.appendTo($("#kiwi")).show().css({bottom:$(".controlbox").outerHeight()+"px",right:0})}),b.on("click",".emoticon",function(a){a.stopPropagation();var b=$(this).data("text"),c=$(".controlbox .inp");c.val(c.val()+b+" ")}),$(document).on("click",function(){b.hide()});var d=kiwi.components.ControlInput();d.addPluginIcon(c)}(),$script("//api.filepicker.io/v1/filepicker.js",function(){function a(a){for(var b=$("#kiwi .controlbox textarea"),c=0;a.length>c;c++){var d=a[c];b.val(b.val()+" "+d.url+"+"+encodeURIComponent(d.filename))}}var b=(kiwi.components.Network(),kiwi.components.ControlInput());filepicker.setKey("YOUR_API_KEY"),filepicker.makeDropPane($("#kiwi .panels")[0],{onSuccess:a});var c=$('<a class="upload" title="Send File"><i class="fa fa-upload"></i></a>');c.click(function(){filepicker.pickMultiple(a)}),b.addPluginIcon(c)});var View=Backbone.View.extend({template:_.template(['<style> #kiwi [data-role="applet-away"] .col-md-offset-3 {margin-left: 25%} #kiwi [data-role="applet-away"] { margin-top: 5px;} </style>','<span data-role="applet-away">','<div class="control-group col-md-6 col-md-offset-3">',"<h6><%= title %></h6>",'<div class="radio"> <label> <input type="radio" name="away_list_type" value="available"> <img src="http://webchat.chateagratis.net/flashv1/data/estados/disponible.png" /> <%= available %> </label> </div>','<div class="radio" data-radio="custom"> <label> <input type="radio" name="away_list_type" value="custom"> <img src="http://webchat.chateagratis.net/flashv1/data/estados/ausente.png" /> <%= custom %> </label> </div>','<div class="radio"> <label> <input type="radio" name="away_list_type" value="out"> <img src="http://webchat.chateagratis.net/flashv1/data/estados/nodisponible.png" /> <%= out %> </label> </div>','<div class="radio"> <label> <input type="radio" name="away_list_type" value="eat"> <img src="http://webchat.chateagratis.net/flashv1/data/estados/saliacomer.png" /> <%= eat %> </label> </div>','<button type="submit" class="btn btn-primary" data-away="save">Save</button>',"</div>"].join("")),initialize:function(){var a={title:"Selecciona tu estado",available:"disponible",custom:"personalizado",out:"estoy ausente",eat:"salí a comer",no_privates:"no acepto privados"};this.$el=$(this.template(a))}}),Applet=Backbone.Model.extend({initialize:function(){this.set("title","FindPeople"),this.view=new View}});kiwi.components.Applet.register("find_people",Applet),kiwi.events.on("command",function(a,b){if("findpeople"==b.command){var c=kiwi.components.Applet.loadOnce("find_people");c.view.show()}}),function(){var a='<div id="color-picker" class="tool">\n<img src="/kiwi/assets/img/color_picker.png">\n<ul>\n<li data-color="0" style="background-color: #FFFFFF">&nbsp;</li>\n<li data-color="1" style="background-color: #000000">&nbsp;</li>\n<li data-color="2" style="background-color: #000080">&nbsp;</li>\n<li data-color="3" style="background-color: #008000">&nbsp;</li>\n<li data-color="4" style="background-color: #FF0000">&nbsp;</li>\n<li data-color="5" style="background-color: #800040">&nbsp;</li>\n<li data-color="6" style="background-color: #800080">&nbsp;</li>\n<li data-color="7" style="background-color: #FF8040">&nbsp;</li>\n<li data-color="8" style="background-color: #FFFF00">&nbsp;</li>\n<li data-color="9" style="background-color: #80FF00">&nbsp;</li>\n<li data-color="10" style="background-color: #008080">&nbsp;</li>\n<li data-color="11" style="background-color: #00FFFF">&nbsp;</li>\n<li data-color="12" style="background-color: #0000FF">&nbsp;</li>\n<li data-color="13" style="background-color: #FF55FF">&nbsp;</li>\n<li data-color="14" style="background-color: #808080">&nbsp;</li>\n<li data-color="16" style="background-color: #C0C0C0">&nbsp;</li>\n</ul>\n</div>\n',b=(kiwi.components.Network(),kiwi.components.ControlInput()),c=null,d=$("#kiwi .controlbox textarea"),e=$(a),f=e.find("ul"),g=function(){f.css("top",-(e.position().top+e.height()+80)+"px")};$(styleHtml).appendTo($("head")),f.hide(),e.click(function(a){a.stopPropagation(),f.show()}),$(document).click(function(){f.hide()}),f.find("li").click(function(a){a.stopPropagation(),$this=$(this),d.css("color",$this.css("background-color")),c=$this.data("color"),$this.parent().hide()}),d.keydown(function(a){var b=a.keyCode||a.which;13==b&&c&&d.val(""+c+d.val())}),b.addPluginIcon(e),g()}();var api_endpoint=getQueryVariable("api_endpoint"),client_id=getQueryVariable("client_id"),secret=getQueryVariable("secret"),code=getQueryVariable("code"),redirect_uri=quitParamCodeOfUrl();kiwi.plugins.on("loaded",function(){if(client_id)$.ajax({type:"GET",dataType:"json",url:api_endpoint+"oauth/v2/token?client_id="+client_id+"&client_secret="+secret+"&grant_type=authorization_code&redirect_uri="+redirect_uri+"&code="+code,success:function(a){window.username=a.username,window.token=a.access_token;var b={token:a.access_token};parent.postMessage(b,"*"),autoCompleteFormKiwi()},error:function(a,b,c){alert("no se ha podido recuperar el token de usuario"),console.log(a),console.log(b),console.log(c)}});else if(getQueryVariable("channel")){var a=getQueryVariable("channel").split(",");a=a.map(function(a){return"#"+a}),$("#server_select_channel").val(a.join(","))}}),kiwi.plugins.on("loaded",function(){$(".tabs").promise().done(function(){var a=!1;$(".tabs").prepend($('<ul><li class="left-menu-btn"><i class="fa fa-align-justify"></i> <span id="activePanelName"></span></li><li class="menuCounters"># <span id="countRooms">0</span> <i class="fa fa-user"></i> <span id="countPrivates">0</span></li></ul>')),$(document).on("click",".connections .panellist li",function(){$(".connections").mmenu().trigger("close.mm")}),$(".left-menu-btn").click(function(){$(".connections").mmenu().trigger("open.mm"),"undefined"==typeof ga||a||ga("send","event","left_menu","used"),a=!0}),$(".connections").promise().done(function(){$(".connections").mmenu({counters:!0})})})}),function(){var a=$('<div id="ext-photo"><img id="current_avatar" width="48px" height="48px" src="/kiwi/assets/img/photo.png" /><span><br> <b>Avatar</b></span></div>');$(".chat-extensions").append(a),a.click(function(){var a=kiwi.components.Applet.loadOnce("kiwi_avatar");a.view.show()})}(),kiwi.plugins.on("loaded",function(){function a(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}function b(a){if("undefined"==typeof jQuery.ui){var b=document.getElementsByTagName("head")[0],c=document.createElement("link");if(c.rel="stylesheet",c.href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/smoothness/jquery-ui.css","function"==typeof define&&define.amd)return b.appendChild(c),void require(["jquery","https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"],function(b){a(b)});var d=document.createElement("script");d.type="text/javascript",d.src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js",d.onload=function(){a($)},c.onload=function(){b.appendChild(d)},b.appendChild(c)}else a($)}function c(){var a=kiwi.settings.get("guest_api")+"/realtime/media";$.ajax({url:a,cache:!1,dataType:"json",headers:{"X-Requested-With":"XMLHttpRequest"}}).done(function(a){k(a)})}function d(a){var b=(new Date).getFullYear(),c=new Date(a).getFullYear().toString().substring(0,4),d=b-c;return 0>=d?d=">18":isNaN(d)&&(d=""),d}function e(a){$.each(kiwi.panels(),function(b,c){var d=c.get("name");return"undefined"==typeof a[d]?"":($(".usericon",c.tab).remove(),void $("span",c.tab).prepend(f(a,d)))})}function f(a,b){var c="";return"undefined"!=typeof a[b].profile&&"undefined"!=typeof a[b].profile.profile_photo&&"undefined"!=typeof a[b].profile.profile_photo.icon?c='<img width="20" height="20" class="usericon" src="'+a[b].profile.profile_photo.icon+'"> ':"undefined"!=typeof a[b]&&"undefined"!=typeof a[b].profile&&"undefined"!=typeof a[b].profile.gender?c='<i class="meicon fa fa-'+a[b].profile.gender+'"></i> ':(src=h(b),c=src?'<img width="20" height="20" class="usericon" src="'+src.src+'"> ':'<i class="meicon fa fa-user"></i> '),c}function g(){$(".memberlists a .webcam_nick_subscriber, .memberlists a .usericon, .memberlists a .gendericon, .meicon").remove();var a=kiwi.panels().active.get("members");"undefined"!=typeof a&&"undefined"!=typeof a.models&&$.each(a.models,function(a,b){var c=b.get("nick");return $el=b.view.$el.find("a"),"undefined"==typeof mediaUserData[c]?(src=h(c),src&&$el.prepend('<img width="20" height="20" class="usericon" src="'+src.src+'"> '),""):(e(mediaUserData,c),mediaUserData[c].webcam&&$el.append('<i class="fa fa-video-camera webcam_nick_subscriber" data-nick="'+c+'"></i> '),void("undefined"!=typeof mediaUserData[c].profile&&"undefined"!=typeof mediaUserData[c].profile.profile_photo&&"undefined"!=typeof mediaUserData[c].profile.profile_photo.icon?$el.prepend('<img width="20" height="20" class="usericon" src="'+mediaUserData[c].profile.profile_photo.icon+'"> '):"undefined"!=typeof mediaUserData[c]&&"undefined"!=typeof mediaUserData[c].profile&&"undefined"!=typeof mediaUserData[c].profile.gender?$el.prepend('<i class="meicon fa fa-'+mediaUserData[c].profile.gender+'"></i> '):(src=h(c),src?$el.prepend('<img width="20" height="20" class="usericon" src="'+src.src+'"> '):$(this).prepend('<i class="meicon fa fa-user"></i> '))))})}function h(a){return ascii=j(a),avatar=i(ascii)}function i(a){return avatars=[{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04c2513ec_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04c47ca73_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04c634e5d_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04c83385f_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04c999398_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04cbc9d1d_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04ce8ddad_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04d0236f7_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04d21200f_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04d3c0388_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04d592ff7_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04d703e26_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04d8ac71e_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04da6f51b_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04dd96b14_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04df679af_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04e14882b_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04e2a934a_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04e472727_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04e5d9ec4_icon.png"},{src:"https://s3.amazonaws.com/images-chatsfree/2014/11/18/546b04e776fa3_icon.png"}],modulo=a%avatars.length,avatars[modulo]}function j(a){suma=0;for(var b=0;b<a.length;b++){var c=a[b];suma+=c.charCodeAt(0)}return suma}function k(a){mediaUserData=a.users||[],g()}function l(){var a=kiwi.panels().active;a.isChannel()&&c(a.get("name"))}var m=kiwi.components.Network();m.on("connect",function(){var b=null;a()&&(b=localStorage.getItem("chatsfree.avatar"),b&&(b={src:b})),null==b&&(b=h(m.get("nick"))),$("#current_avatar").attr("src",b.src)}),window.mediaUserData={},b(function(a){a(document).tooltip({items:".memberlists a",position:{my:"left+15 center",at:"right center"},tooltipClass:"user-tooltip",content:function(){var b=a.trim(a(this).text()),c="",e="",f="",g="";return(-1!=b.indexOf("@")||-1!=b.indexOf("+"))&&(b=b.slice(1)),"undefined"==typeof mediaUserData[b]?"":("undefined"!=typeof mediaUserData[b].profile&&"undefined"!=typeof mediaUserData[b].profile.profile_photo&&"undefined"!=typeof mediaUserData[b].profile.profile_photo.medium&&(g='<img class="photoUserTooltip" src="'+mediaUserData[b].profile.profile_photo.medium+'"> <br>'),"undefined"!=typeof mediaUserData[b]&&"undefined"!=typeof mediaUserData[b].profile&&"undefined"!=typeof mediaUserData[b].profile.gender&&(f='<i class="fa fa-'+mediaUserData[b].profile.gender+'"></i> '),"undefined"!=typeof mediaUserData[b]&&"undefined"!=typeof mediaUserData[b].country&&(c='&nbsp;<span class="tooltip-country"><i class="fa fa-location-arrow"></i> '+mediaUserData[b].country+"</span>"),"undefined"!=typeof mediaUserData[b]&&"undefined"!=typeof mediaUserData[b].profile&&(e='&nbsp;<span class="tooltip-age">'+d(mediaUserData[b].profile.birthday)+"</span>"),g+f+e+c)}})}),window.getAvatarFromNick=function(a){var b=window.mediaUserData;return"undefined"!=typeof b[a]&&"undefined"!=typeof mediaUserData[a].profile&&"undefined"!=typeof mediaUserData[a].profile.profile_photo&&"undefined"!=typeof mediaUserData[a].profile.profile_photo.icon?mediaUserData[a].profile.profile_photo.icon:h(a)},kiwi.panels.on("active",function(){setTimeout(g,100)}),setInterval(l,3e4),setTimeout(l,5e3)}),function(){var a=kiwi.components.ControlInput();a.on("command:msg",function(a){var b=a.params.join(" ");if("$"==b.charAt(0)&&!(b.length<10)){b=b.substring(1);var c=kiwi.panels().active.get("network").get("nick"),d=kiwi.panels().active.get("members").getByNick(c);d.get("is_op")&&createQuote(b,kiwi.panels().active.get("name"))}})}(),function(){var a=kiwi.components.Network();a.on("join",function(a){var b=kiwi.connections.getByConnectionId(0).get("nick");a.nick==b&&getQuotes(encodeURIComponent(a.channel),function(b){_.find(kiwi.panels(),function(c){c.get("name")==a.channel&&$.each(b.resources,function(a,b){c.addMsg("","== "+b.creator.username+" "+b.body,"motd")})})})})}(),function(){function a(a){$("body").append('<div id="jquery_jplayer_1" style="display: none;">'),$.getScript(window.kiwi_server+"/kiwi/assets/plugins/radio/jquery.jplayer.js",function(){var b={title:a.name,mp3:a.url},c=!1;$("#jquery_jplayer_1").jPlayer({ready:function(){if(c=!0,$(this).jPlayer("setMedia",b),$(this).jPlayer("play"),a.channel){var d=kiwi.components.ControlInput();d.run("/join "+a.channel)}},pause:function(){$(this).jPlayer("clearMedia")},error:function(a){c&&a.jPlayer.error.type===$.jPlayer.error.URL_NOT_SET&&$(this).jPlayer("setMedia",b).jPlayer("play")},swfPath:window.kiwi_server+"/kiwi/assets/plugins/radio/",supplied:"mp3",preload:"none",wmode:"window",useStateClassSkin:!0,autoBlur:!1,keyEnabled:!0})})}function b(a){$("#jquery_jplayer_1").jPlayer("volume",a)}function c(a){var b={title:a.name,mp3:a.url};if(a.channel){var c=kiwi.components.ControlInput();c.run("/join "+a.channel)}$("#jquery_jplayer_1").jPlayer("setMedia",b),$("#jquery_jplayer_1").jPlayer("play")}function d(){$("#jquery_jplayer_1").jPlayer("stop")}function e(a){for(var b=kiwi.settings.get("radio"),c=b.length,d=0;c>d;d++)if(console.log(b[d]),b[d].id==a)return b[d];return null}function f(){var a=[],b=kiwi.settings.get("radio"),c=b.length;a.push({name:"Volume",icon:"volume-up",type:"Slider",options:{defaultValue:window.radio.volume||100,event:"slidechange"},command:"/radiovolume"});for(var d=0;c>d;d++)a.push({name:b[d].name,icon:"headphones",type:"Toggle",options:{defaultValue:!1,groupName:"radios"},command:"/playradio "+b[d].id});for(var e=window.right_menu_items.length,d=0;e>d;d++)"Radio"==window.right_menu_items[d].name&&(window.right_menu_items[d].submenu=a)}window.radio={},$(".right-menu").promise().done(function(){f()});var g=!1;kiwi.events.on("command",function(f,h){if("playradio"===h.command){var i=e(h.params[0]);window.radio.selected=i.id,g?"true"==h.params[1]?c(i):(d(),window.radio.selected=0):(a(i),g=!0)}"radiovolume"===h.command&&b(h.params[0])})}(),kiwi.plugins.on("loaded",function(){$(".main").append($('<li class="right-menu-btn"><i class="fa fa-gear" title="Open Menu"></i></li>')),window.create_right_menu=function(){var a=window.right_menu_items||[],b=a.length;$(".right-menu").mmenu().trigger("close.mm"),$(".right-menu").remove(),$(".main").append($("<nav class='right-menu'><ul class='right-menu-items'></ul></nav>")),$(".right-menu-btn").click(function(){$(".right-menu").mmenu().trigger("open.mm")});for(var c=0;b>c;c++)$(".right-menu-items").append(generateRightMenuItem(a[c]));$(".right-menu").mmenu({counters:!0,searchfield:!0,offCanvas:{position:"right"}}).on("opened.mm",function(){console.log("opened"),$(".right-menu a").addClass("no_navigate")}).on("click",'a[href="#"]',function(a){return void 0!=a.target.innerText&&"undefined"!=typeof ga&&ga("send","event","right_menu",a.target.innerText),!0})},generateToggle=function(a){var b='<input type="checkbox" data-name="'+a.name+'"';return a.options?(b+=a.options.className?" "+a.opotion.className+'"':'class="Toggle"',a.options.defaultValue&&(b+="checked"),a.options.groupName&&(b+='data-groupName="'+a.options.groupName+'"')):b+='class="Toggle"',b+="/>"},generateRightMenuItem=function(a){if(void 0==a.submenu&&"Toggle"!=a.type&&"Slider"!=a.type)var b='<li><span><i class="fa fa-'+a.icon+'"></i> '+a.name+"</span></li>";else var b='<li><span><i class="fa fa-'+a.icon+'"></i> '+a.name+"</span></li>";var c=$(b),d=c;switch(a.type){case"Toggle":c.append(generateToggle(a)),d=$("input",c),a.options&&a.options.groupName&&d.click(function(){$(document).find("*[data-groupName='"+a.options.groupName+"']").each(function(){$(this).data("name")!=a.name&&$(this).prop("checked",!1)})});break;case"Slider":window.loadExternalLib(jQuery.ui,["//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/smoothness/jquery-ui.css","//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"],function(){$("span",c).append('<div id="slider"></div>'),$("#slider",c).slider({min:0,step:.01,max:1,value:a.options.defaultValue})})}if(void 0!=a.command){var e="click";a.options&&(e=a.options.event||"click"),d.on(e,function(){var b=kiwi.components.ControlInput();switch(a.type){case"Toggle":b.run(a.command+" "+$("input",c).is(":checked"));break;case"Slider":b.run(a.command+" "+$("#slider",c).slider("option","value"));break;default:b.run(a.command)}$(".right-menu").mmenu().trigger("close.mm")})}if(void 0!=a.submenu){c.append("<ul />");for(var f=a.submenu.length,g=0;f>g;g++)$("ul",c).append(generateRightMenuItem(a.submenu[g]))}return c},window.create_right_menu()});var usrTmpl="<%\nvar currentYear, yearUser, yearsOld;\n\nif(typeof(profile) != 'undefined'){\n    currentYear = new Date().getFullYear();\n    yearUser = new Date(profile.birthday).getFullYear().toString().substring(0,4);\n    yearsOld = currentYear - yearUser;\n    if (yearsOld <=0){\n        yearsOld = '>18';\n}else if(isNaN(yearsOld)){\n        yearsOld = null;\n    }\n}else{\n    yearsOld = null;\n}\n%>\n\n<% if(typeof(profile) != 'undefined' &&\n    typeof(profile.profile_photo) != 'undefined' &&\n    typeof(profile.profile_photo.path_medium) != 'undefined'){ %>\n    <img src=\"<%= profile.profile_photo.path_medium %>\" width=\"199px\">\n<% } %>\n<ul id=\"user-info\" style=\"margin-left:15px;\">\n    <% if(yearsOld != null){ %>\n        <li><i class=\"fa fa-calendar-o\"></i>  Age <%= yearsOld %></li>\n    <% } %>\n    <% if(typeof(profile) != 'undefined' && typeof(profile.gender) != 'undefined' && profile.gender != ''){ %>\n        <li><i class=\"fa <%if(profile.gender == 'female'){%>fa-female<% }else{ %>fa-male<% } %>\"></i> Gender: <%= profile.gender || '' %></li>\n    <% } %>\n    <% if(typeof(city) != 'undefined'){ %>\n        <li><i class=\"fa fa-location-arrow\"></i> Location: <% if(city.name != 'no_city'){ %><%= city.name %>, <% } %><%= city.country.name %></li>\n    <% } %>\n"+'    <li><center><a href="/users/<%= username_canonical %>-<%= id %>" <% if(typeof(window.user_id) == \'undefined\') { %> target="_blank"<% } %>> <i class="fa fa-info"></i> Full profile</a></center></li>\n</ul>',renderUser=function(a){var b=usrTmpl.trim();
return _.template(b,a)},getUserInfo=function(a){var b=window.gest_api+"/users/"+a.get("name"),c=$.Deferred(),d=a.get("userData");return d?c.resolve(d):$.ajax({dataType:"json",headers:{"X-Requested-With":"XMLHttpRequest"},crossDomain:!0,url:b,success:function(b){a.set("userData",b),c.resolve(b)},error:function(){c.reject()}}),c.promise()},showUserInfoOnSideBar=function(a){var b=getUserInfo(a);$.when(b).done(function(a){kiwi.components.RightBar.show(!1),$(".memberlists").html(renderUser(a))})};kiwi.plugins.on("loaded",function(){var a=kiwi.components.Network();a.on("connect",function(){var a=kiwi.connections.active_connection.panels;a.bind("add",function(a){a.isQuery()&&a.on("active",function(){showUserInfoOnSideBar(a)})})})}),function(){var a="<style>#kiwi .style-grid {position: absolute;display: block;z-index: 1000;background: #121314;padding: 2px;width: 120px;border-radius: 3px;}#kiwi .style-colours { overflow: hidden; }#kiwi .style-colour {width: 25%;height: 27px;display: block;float: left;cursor: pointer;}#kiwi .style-color-selected {-webkit-box-shadow: inset 0px 0px 5px 0px rgba(255, 255, 255, 0.75);-moz-box-shadow:    inset 0px 0px 5px 0px rgba(255, 255, 255, 0.75);box-shadow:         inset 0px 0px 5px 0px rgba(255, 255, 255, 0.75);z-index: 10;position: relative;}#kiwi .style-formats {margin: 10px 0;overflow: hidden;}#kiwi .style-format {width: 33%;cursor: pointer;display: block;float: left;text-align: center;}#kiwi .style-format-bold { font-weight: bold; }#kiwi .style-format-italic { font-style: italic; }#kiwi .style-format-underline { text-decoration: underline; }#kiwi .style-reset {color: #D6D6D6;font-size: 20px;text-align: right;display: block;cursor: pointer;margin: 5px 6px 10px;}</style>",b='<div class="style-grid"><i class="fa fa-undo style-reset"></i><div class="style-colours"><a class="style-colour" style="background:#FFFFFF;border-radius: 3px 0 0 0;" data-colour="0"></a><a class="style-colour" style="background:#000000;" data-colour="1"></a><a class="style-colour" style="background:#000080;" data-colour="2"></a><a class="style-colour" style="background:#008000;border-radius: 0 3px 0 0;" data-colour="3"></a><a class="style-colour" style="background:#FF0000;" data-colour="4"></a><a class="style-colour" style="background:#800040;" data-colour="5"></a><a class="style-colour" style="background:#800080;" data-colour="6"></a><a class="style-colour" style="background:#FF8040;" data-colour="7"></a><a class="style-colour" style="background:#FFFF00;" data-colour="8"></a><a class="style-colour" style="background:#80FF00;" data-colour="9"></a><a class="style-colour" style="background:#008080;" data-colour="10"></a><a class="style-colour" style="background:#00FFFF;" data-colour="11"></a><a class="style-colour" style="background:#0000FF;" data-colour="12"></a><a class="style-colour" style="background:#FF55FF;" data-colour="13"></a><a class="style-colour" style="background:#808080;" data-colour="14"></a><a class="style-colour" style="background:#C0C0C0;" data-colour="15"></a></div><div class="style-formats"><a class="style-format style-format-bold">Aa</a><a class="style-format style-format-italic">Aa</a><a class="style-format style-format-underline">Aa</a></div></div>',c=$(b),d=$('<a><i class="fa fa-font"></i></a>'),e=$("#kiwi .controlbox .inp"),f=kiwi.components.ControlInput();f.addPluginIcon(d);var g={colour:!1,css_colour:!1,bold:!1,italic:!1,underline:!1},h=function(){e.css("color",g.css_colour?g.css_colour:""),e.css("font-weight",g.bold?"bold":""),e.css("font-style",g.italic?"italic":""),e.css("text-decoration",g.underline?"underline":""),$("#kiwi .style-colour").removeClass("style-color-selected"),$("#kiwi .style-colour[data-colour="+g.colour+"]").addClass("style-color-selected")};$(a).appendTo($("head")),kiwi.events.on("command",function(a,b){if("msg"===b.command){var c="";if(g.colour!==!1){var d=g.colour.toString();g.colour<10&&(d="0"+d),c+=String.fromCharCode(3)+d}g.bold&&(c+=""),g.italic&&(c+=""),g.underline&&(c+=""),b.params[1]&&(b.params[1]=c+b.params[1])}}),d.on("click",function(a){a.stopPropagation(),c.appendTo($("#kiwi")).show().css({bottom:$(".controlbox").outerHeight()+"px",right:"10px"})}),$(document).on("click",function(){c.hide()}),c.on("click",".style-reset",function(a){a.stopPropagation(),g.colour=!1,g.css_colour=!1,g.bold=!1,g.italic=!1,g.underline=!1,h()}),c.on("click",".style-colour",function(a){a.stopPropagation();var b=parseInt($(this).data("colour"),10);isNaN(b)||(g.css_colour=$(this).css("background-color"),g.colour=b,h())}),c.on("click",".style-format-bold",function(){event.stopPropagation(),g.bold=!g.bold,h()}),c.on("click",".style-format-italic",function(){event.stopPropagation(),g.italic=!g.italic,h()}),c.on("click",".style-format-underline",function(){event.stopPropagation(),g.underline=!g.underline,h()})}();var contMsgPrivate=0,contMsgRooms=0,arrPrivate=[],arrRooms=[],connected=!1,start=Date.now();kiwi.plugins.on("loaded",function(){var a=kiwi.components.ControlInput();connected=!0,a.on("command:msg",function(){var a=kiwi.panels().active.get("name");0==a.indexOf("#")?(-1==arrRooms.indexOf(a)&&arrRooms.push(a),contMsgRooms++):(-1==arrPrivate.indexOf(a)&&arrPrivate.push(a),contMsgPrivate++)})}),window.onbeforeunload=function(){var a=Date.now(),b=Math.round((a-start)/1e3),c=kiwi.connections.getByConnectionId(0).get("nick");return ga("send","event","ChatMessages",c,{dimension3:c,metric1:contMsgPrivate,metric2:contMsgRooms,metric3:arrPrivate.length,metric4:arrRooms.length,metric5:b}),ga("send","event","ChatChannels",arrRooms.join()),contMsgPrivate=0,contMsgRooms=0,arrPrivate=[],arrRooms=[],b=0,connected?"This will close all conversations. Are you sure you want to close this window and exit of chat?":void 0},function(){function a(a){if("undefined"==typeof jQuery.ui){var b=document.getElementsByTagName("head")[0],c=document.createElement("link");if(c.rel="stylesheet",c.href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/smoothness/jquery-ui.css","function"==typeof define&&define.amd)return b.appendChild(c),void require(["jquery","https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"],function(b){a(b)});var d=document.createElement("script");d.type="text/javascript",d.src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js",d.onload=function(){a($)},c.onload=function(){b.appendChild(d)},b.appendChild(c)}else a($)}function b(a){if("undefined"==typeof swfobject){var b=document.getElementsByTagName("head")[0],c=document.createElement("script");c.type="text/javascript",c.src="//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js",c.onload=a,b.appendChild(c)}else a()}b(function(){a(function(a){function b(){var b=a("#webcam_container"),d=e.get("nick"),f={streamer:kiwi.settings.get("videochat_streamer_url")};return f.file=d,0==b.length?(console.log("$webcamContainer.length == 0"),a("body").append(a("<div />",{id:"webcam_publisher_container"})),swfobject.embedSWF(kiwi.settings.get("videochat_publisher_url"),"webcam_publisher_container","300px","250px","9.0.0",null,f),a("#webcam_publisher_container").dialog({dialogClass:"no-close",title:"My webcam",close:c,resizable:!1}),void window.eventBus.trigger("webcam_pub:on")):(b.append(a("<div />",{id:"webcam_publisher_container",style:"width: 100%"})),a("#webcam_publisher_container").append(a("<div />",{id:"flash_webcham_pub"})),a("#ext-webcam span").css("color","red"),a("#ext-webcam span b").html("Stop"),a("#ext-webcam span i").switchClass("fa-play","fa-stop"),swfobject.embedSWF(kiwi.settings.get("videochat_publisher_url"),"flash_webcham_pub",Math.ceil(a("#webcam_publisher_container").width())+"px","100%","9.0.0",null,f),a(window).resize(function(){a("#flash_webcham_pub").width(Math.ceil(a("#webcam_publisher_container").width()))}),void window.eventBus.trigger("webcam_pub:on"))}function c(){return a("#webcam_publisher_container").closest(".ui-dialog").length>0?(a("#webcam_publisher_container").closest(".ui-dialog").remove(),a("#webcam_publisher_container").remove(),void window.eventBus.trigger("webcam_pub:off")):(a("#webcam_publisher_container").remove(),a("#ext-webcam span").css("color","black"),a("#ext-webcam span b").html("Webcam"),a("#ext-webcam span i").switchClass("fa-stop","fa-play"),void window.eventBus.trigger("webcam_pub:off"))}{var d,e=kiwi.components.Network();kiwi.components.ControlInput()}swfobject.hasFlashPlayerVersion("9.0.18")&&(d=a('<div id="ext-webcam"><img src="/kiwi/assets/img/webcam.png" /><span><br><i class="fa fa-play"></i> <b>Webcam</b></span></div>'),a(".chat-extensions").append(d)),d.click(function(){a("#webcam_publisher_container").length>0?c():b()}),kiwi.events.on("command",function(a,d){"nick"==d.command&&swfobject.getObjectById("webcam_publisher_container")&&setTimeout(function(){c(),window.eventBus.trigger("webcam_pub:off"),b(),window.eventBus.trigger("webcam_pub:on")},3e3)})})})}(),kiwi.plugins.on("loaded",function(){function a(a){if("undefined"==typeof jQuery.ui){var b=document.getElementsByTagName("head")[0],c=document.createElement("link");if(c.rel="stylesheet",c.href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/smoothness/jquery-ui.css","function"==typeof define&&define.amd)return b.appendChild(c),void require(["jquery","https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"],function(b){a(b)});var d=document.createElement("script");d.type="text/javascript",d.src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js",d.onload=function(){a($)},c.onload=function(){b.appendChild(d)},b.appendChild(c)}else a($)}function b(a){if("undefined"==typeof swfobject){var b=document.getElementsByTagName("head")[0],c=document.createElement("script");c.type="text/javascript",c.src="//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js",c.onload=a,b.appendChild(c)}else a()}b(function(){a(function(a){function b(b){var e=a("#webcam_container");d=!0;var f={},g={streamer:kiwi.settings.get("videochat_streamer_url")};g.file=b,f.allowfullscreen="true",e.length>0?(a("#webcam_container").append(a("<div />",{id:"webcam_subscriber_container",style:"width: 100%"})),a("#webcam_subscriber_container").append('<div class="modal-header"><button type="button" class="close" data-dismiss="modal" data-webcam="close"><span aria-hidden="true">×</span><span class="sr-only" >Close</span></button><h4 class="modal-title">Webcam of '+b+"</h4></div>"),a("#webcam_subscriber_container").append(a("<div />",{id:"flash_webcham_subs"})),swfobject.embedSWF(kiwi.settings.get("videochat_subscriber_url"),"flash_webcham_subs",Math.ceil(a("#webcam_subscriber_container").width())+"px","100%","9.0.0",null,g,f),a(window).resize(function(){a("#flash_webcham_subs").width(Math.ceil(a("#webcam_subscriber_container").width())+"px")})):(a("body").append(a("<div />",{id:"webcam_subscriber_container"})),swfobject.embedSWF(kiwi.settings.get("videochat_subscriber_url"),"webcam_subscriber_container","280px","250px","9.0.0",null,g,f),a("#webcam_subscriber_container").dialog({dialogClass:"no-close",title:b+" webcam",close:c,resizable:!1})),window.eventBus.trigger("webcam_sub:on")}function c(){0==a("#webcam_container").length?(a("#webcam_subscriber_container").dialog("close"),a("#webcam_subscriber_container").remove()):a("#webcam_subscriber_container").remove(),d=!1,window.eventBus.trigger("webcam_sub:off")}var d=!1;a(document).on("click",'[data-webcam="close"]',function(){c()}),a(document).on("click",".webcam_nick_subscriber",function(e){e.preventDefault(),e.stopPropagation();var f=a(this).data("nick");return d?(c(),b(f)):b(f),!1})})})});
</script>
</script>
</script>